(()=>{"use strict";console.log("LovaBridge background script loaded"),chrome.runtime.onInstalled.addListener(function(o){"install"===o.reason&&(console.log("LovaBridge extension installed"),chrome.storage.local.set({isEnabled:!0,conversationHistory:[]}))}),chrome.runtime.onMessage.addListener(function(o,e,n){return"getSettings"===o.action?(chrome.storage.local.get(["isEnabled","conversationHistory"],function(o){n(o)}),!0):"saveConversation"===o.action?(chrome.storage.local.get(["conversationHistory"],function(e){var t=e.conversationHistory||[];t.push(o.conversation),t.length>10&&t.shift(),chrome.storage.local.set({conversationHistory:t},function(){n({success:!0})})}),!0):void 0})})();